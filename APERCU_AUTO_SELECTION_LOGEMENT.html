<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aper√ßu - Auto-s√©lection Logement</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .code-block {
            background-color: #f4f4f4;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .success-box {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .info-box {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .example-link {
            display: inline-block;
            margin: 10px 0;
            padding: 10px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .example-link:hover {
            background: #0056b3;
            color: white;
        }
        .step {
            background: #fff;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .step-number {
            background: #007bff;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">üìã Auto-s√©lection du Logement - Guide d'Utilisation</h1>
        
        <div class="success-box">
            <strong>‚úÖ Fonctionnalit√© Impl√©ment√©e</strong><br>
            Le formulaire de candidature peut maintenant pr√©-s√©lectionner automatiquement un logement bas√© sur un param√®tre URL.
        </div>

        <h2 class="mt-4">üéØ Comment √ßa fonctionne</h2>
        
        <div class="step">
            <h5><span class="step-number">1</span>G√©n√©rer le hash MD5</h5>
            <p>Pour chaque logement, cr√©ez un hash MD5 de sa r√©f√©rence :</p>
            <div class="code-block">
                &lt;?php<br>
                $reference = 'RP-01';<br>
                $hash = md5($reference); // R√©sultat: 4e732ced3463d06de0ca9a15b6153677<br>
                ?&gt;
            </div>
        </div>

        <div class="step">
            <h5><span class="step-number">2</span>Cr√©er le lien</h5>
            <p>Utilisez le hash dans l'URL du formulaire de candidature :</p>
            <div class="code-block">
                &lt;a href="candidature/?ref=4e732ced3463d06de0ca9a15b6153677"&gt;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;Postuler pour ce logement<br>
                &lt;/a&gt;
            </div>
        </div>

        <div class="step">
            <h5><span class="step-number">3</span>R√©sultat</h5>
            <p>Lorsque l'utilisateur clique sur le lien, le logement RP-01 est automatiquement s√©lectionn√© dans le formulaire.</p>
        </div>

        <h2 class="mt-4">üìù Exemples de Code</h2>

        <h4 class="mt-3">Page de logement individuel</h4>
        <div class="code-block">
&lt;?php<br>
// Exemple pour la page du logement RP-01<br>
$logement_reference = 'RP-01';<br>
$candidature_url = 'https://contrat.myinvest-immobilier.com/candidature/?ref=' . md5($logement_reference);<br>
?&gt;<br>
<br>
&lt;div class="logement-details"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&gt;Appartement &lt;?php echo $logement_reference; ?&gt;&lt;/h2&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;T1 Bis - 26m¬≤ - 890‚Ç¨/mois&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="&lt;?php echo $candidature_url; ?&gt;" class="btn btn-primary"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Postuler maintenant<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;<br>
&lt;/div&gt;
        </div>

        <h4 class="mt-3">Liste de logements avec boucle</h4>
        <div class="code-block">
&lt;?php<br>
// R√©cup√©ration des logements depuis la base de donn√©es<br>
$logements = [ /* ... r√©sultats de la requ√™te ... */ ];<br>
<br>
foreach ($logements as $logement):<br>
&nbsp;&nbsp;&nbsp;&nbsp;$ref_hash = md5($logement['reference']);<br>
&nbsp;&nbsp;&nbsp;&nbsp;$candidature_url = "candidature/?ref=" . $ref_hash;<br>
?&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="logement-card"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h3&gt;&lt;?php echo htmlspecialchars($logement['reference']); ?&gt;&lt;/h3&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php echo htmlspecialchars($logement['adresse']); ?&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="&lt;?php echo $candidature_url; ?&gt;" class="btn btn-primary"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Candidater<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&lt;?php endforeach; ?&gt;
        </div>

        <h2 class="mt-4">üîó Exemples de Liens</h2>
        
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>R√©f√©rence</th>
                    <th>Hash MD5</th>
                    <th>URL Compl√®te</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>RP-01</strong></td>
                    <td><code>4e732ced3463d06de0ca9a15b6153677</code></td>
                    <td><code>candidature/?ref=4e732ced3463d06de0ca9a15b6153677</code></td>
                </tr>
                <tr>
                    <td><strong>RP-02</strong></td>
                    <td><code>3b8dca3d42e2c50626c0c5a950f3a095</code></td>
                    <td><code>candidature/?ref=3b8dca3d42e2c50626c0c5a950f3a095</code></td>
                </tr>
                <tr>
                    <td><strong>RP-03</strong></td>
                    <td><code>f73fc7e5b729c3d1555f95b7b174f5fc</code></td>
                    <td><code>candidature/?ref=f73fc7e5b729c3d1555f95b7b174f5fc</code></td>
                </tr>
            </tbody>
        </table>

        <h2 class="mt-4">üîí S√©curit√©</h2>
        
        <div class="info-box">
            <ul class="mb-0">
                <li><strong>Validation du format</strong> : Le param√®tre ref est valid√© pour correspondre au format MD5 (32 caract√®res hexad√©cimaux)</li>
                <li><strong>Filtrage des logements</strong> : Seuls les logements avec le statut "disponible" peuvent √™tre s√©lectionn√©s</li>
                <li><strong>Pas de privil√®ges</strong> : Cette fonctionnalit√© ne donne aucun acc√®s privil√©gi√©, elle facilite simplement la navigation</li>
                <li><strong>Hash MD5</strong> : Utilis√© uniquement pour masquer la r√©f√©rence dans l'URL, pas pour la s√©curit√© cryptographique</li>
            </ul>
        </div>

        <h2 class="mt-4">üìä Comportement</h2>
        
        <table class="table table-bordered">
            <thead class="table-light">
                <tr>
                    <th>Sc√©nario</th>
                    <th>Comportement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Hash valide et logement disponible</td>
                    <td class="text-success">‚úÖ Le logement est automatiquement s√©lectionn√©</td>
                </tr>
                <tr>
                    <td>Hash invalide ou malform√©</td>
                    <td class="text-warning">‚ö†Ô∏è Aucune s√©lection, l'utilisateur choisit manuellement</td>
                </tr>
                <tr>
                    <td>Logement non trouv√©</td>
                    <td class="text-warning">‚ö†Ô∏è Aucune s√©lection, l'utilisateur choisit manuellement</td>
                </tr>
                <tr>
                    <td>Logement non disponible</td>
                    <td class="text-warning">‚ö†Ô∏è N'appara√Æt pas dans la liste</td>
                </tr>
                <tr>
                    <td>Aucun param√®tre ref</td>
                    <td class="text-info">‚ÑπÔ∏è Formulaire normal, s√©lection manuelle</td>
                </tr>
            </tbody>
        </table>

        <h2 class="mt-4">üß™ Test</h2>
        
        <p>Un script de test est disponible pour v√©rifier la fonctionnalit√© :</p>
        <div class="code-block">
            https://votre-domaine.com/test-candidature-auto-selection.php
        </div>
        
        <p class="mt-3">Ce script affichera :</p>
        <ul>
            <li>Les logements disponibles dans votre base de donn√©es</li>
            <li>Leurs hash MD5 correspondants</li>
            <li>Des liens de test cliquables</li>
            <li>Une validation de la logique de matching</li>
        </ul>

        <div class="success-box mt-4">
            <strong>‚ú® Avantages de cette fonctionnalit√© :</strong>
            <ul class="mb-0 mt-2">
                <li>Meilleure exp√©rience utilisateur - pas besoin de chercher le logement dans une liste</li>
                <li>R√©duction des erreurs - le bon logement est d√©j√† s√©lectionn√©</li>
                <li>Facilite le marketing - chaque logement peut avoir son propre lien de candidature</li>
                <li>Tra√ßabilit√© - possibilit√© de savoir d'o√π vient chaque candidature</li>
            </ul>
        </div>

        <div class="mt-4 p-3 bg-light border rounded">
            <h5>üìö Documentation compl√®te</h5>
            <p class="mb-0">Pour plus de d√©tails, consultez le fichier <code>DOCUMENTATION_AUTO_SELECTION_LOGEMENT.md</code></p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
